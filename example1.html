<!DOCTYPE html>
<html lang="en">
<head>
	<title>Raphael examples</title>
	<script src="raphael.js"></script>

</head>
<body>
	<div id="notepad"></div>
	<script>

	//array that contians the data values
	var dataValue = [];
	dataValue[0]= 100;
	dataValue[1]= 50;
	dataValue[2]= 150;
	dataValue[3]= 100;
	dataValue[4]= 200;
	

	var heightValue = []; //contains the difference in height between this bar and the previous bar

	for(var j =0,jj=dataValue.length; j<jj; j++){
		if(j==0){
			heightValue[j]=dataValue[j];
		}else{
			heightValue[j]= dataValue[j]-dataValue[j-1];	
		}
		
	}

	console.log("heightValue "+heightValue);

	var paperHeight = 0;

	function findTheHeight(){
		var test = 0;
		for(var z=0,zz=dataValue.length; z<zz; z++){
			if(z==0){
				paperHeight = dataValue[z];
			}else{
				if(dataValue[z] > dataValue[z-1]){
					console.log("im greater "+z);
					paperHeight+=dataValue[z];
				}else{
					console.log("im smaller "+z);
					paperHeight-=dataValue[z];
				}
			}
		}
		paperHeight*=2;
	}

	findTheHeight();


	var paper = Raphael(50, 10, 800, paperHeight);
	// Canvas is created at the top left corner of the #notepad element
	// (or its top right corner in dir="rtl" elements)

	// Same as above
	var startFromX = 30;
	var startFromY = 400;
	var width = 100;
	var x = 40;
	var y = 0;
	var height = 0;
	var startFromBottom = false;



	function makeBar(x,y,w,h,color){
		c = paper.rect(x,y,w,h).attr({
			stroke: color,
			fill: "210-"+color+"-#333"
		});
	}

	function makeGrid(){
		c = paper.path("M1 0 L1 400 M1 400 L800 400");
	}

	function sumTotBar(){
		var acum = 0;
		for(var i=0,ii=heightValue.length; i<ii; i++){
			acum +=heightValue[i];
		}
		y = startFromY - acum;
		color = '#0000ff';
		if(acum == 0){
			acum = 1;
		}
		makeBar(x,y,width,acum,color);
		
	}

	makeGrid();

	for(var i=0,ii=dataValue.length; i<ii; i++){

		if(i==0){//the first bar is different from the rest because it has nothing to compare to
			y = startFromY - dataValue[i];
			height = dataValue[i];
			color = '#00ff00';
		}else{
			if(heightValue[i]<0){
				y = startFromY - dataValue[i-1];
				height = heightValue[i] *(-1);
				color = '#ff0000';
			}else{
				y = startFromY - dataValue[i];
				height = heightValue[i];
				color = '#00ff00';
			}
			
		}
		makeBar(x,y,width,height,color);

		x+=110;	
		
	}	

	sumTotBar();



	</script>
</body>
</html>